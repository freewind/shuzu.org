<html>
  <head>
    <title>数组网 - 彪悍的Demo无需解释</title>
    <link href="/css/site.css" rel="stylesheet">
    <script src="/js/less-3.8.0.min.js"></script>
    <link href="/css/github-markdown-2.10.0.css" rel="stylesheet">
    <script src="/js/markdown-0.5.0.js"></script>
  </head>
  <body>
    <div id="header">
      <div class="site-slogan">彪悍的Demo无须解释</div>
      <div><span class="site-name"><a href="/">数组网</a></span><span class="site-url"><a href="shuzu.org">shuzu.org</a></span></div>
    </div>
    <div id="main">
      <div id="repo-main">
        <div class="navigation"><span><a href="/">数组网</a></span><span> &gt; </span><span class="org-link"><a href="/orgs/js-demos/index.html">js-demos</a></span><span> &gt; </span><span class="repo-name">jsonp-demo</span><span class="repo-description"></span></div>
        <div id="readme">
          <div class="markdown markdown-body">Start Server
------------

```
npm install
```

```
node server1.js  // will listen on 3000
node server2.js  // will listen on 3001
```

Examples
--------

1. Fetch json data from a different domain will fail:

Visit &lt;http://localhost:3000/json.html&gt; and click the button, 
and also open browser's console to see what happens.

2. Fetch data with jsonp and manually creating `script` tag:

Visit &lt;http://localhost:3000/jsonp-script-tag.html&gt; and click the button.

3. Fetch data with jsonp and use jquery simply:
   
   Visit &lt;http://localhost:3000/jsonp-jquery.html&gt; and click the button.

Documents
---------

- http://json-p.org/
- http://stackoverflow.com/questions/2067472/what-is-jsonp-all-about</div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/jsonp-demo/blob/master/json.html" target="_blank">json.html</a></div>
            <div class="path">json.html</div>
          </div>
          <div class="body">
            <pre class="content"><code class="html">&lt;html&gt;
&lt;head&gt;
    &lt;script src=&quot;./node_modules/jquery/dist/jquery.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        function loadData() {
            $.get('http://localhost:3001/json-data', function (data) {
                $('#data').text(data);
            });
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div&gt;
    &lt;button onclick=&quot;loadData()&quot;&gt;Client to fetch data by AJAX&lt;/button&gt;
&lt;/div&gt;
&lt;div id=&quot;data&quot;&gt;&lt;/div&gt;
&lt;hr/&gt;
Note: open the console of the browser to see where is wrong.
&lt;/body&gt;
&lt;/html&gt;</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/jsonp-demo/blob/master/jsonp-jquery.html" target="_blank">jsonp-jquery.html</a></div>
            <div class="path">jsonp-jquery.html</div>
          </div>
          <div class="body">
            <pre class="content"><code class="html">&lt;html&gt;
&lt;head&gt;
    &lt;script src=&quot;./node_modules/jquery/dist/jquery.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        function loadData() {
            $.get({
                url: 'http://localhost:3001/jsonp-data',
                dataType: 'jsonp',
                success: function (data) {
                    $(&quot;#data&quot;).text(JSON.stringify(data));
                }
            });
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div&gt;
    &lt;button onclick=&quot;loadData()&quot;&gt;Client to fetch data by AJAX&lt;/button&gt;
&lt;/div&gt;
&lt;div id=&quot;data&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/jsonp-demo/blob/master/jsonp-script-tag.html" target="_blank">jsonp-script-tag.html</a></div>
            <div class="path">jsonp-script-tag.html</div>
          </div>
          <div class="body">
            <pre class="content"><code class="html">&lt;html&gt;
&lt;head&gt;
    &lt;script src=&quot;./node_modules/jquery/dist/jquery.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        function showData(data) {
            $('#data').text(JSON.stringify(data));
        }
        function loadData() {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'http://localhost:3001/jsonp-data?callback=showData';
            document.getElementsByTagName('head')[0].appendChild(script);
        }
    &lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div&gt;
    &lt;button onclick=&quot;loadData()&quot;&gt;Client to fetch data by AJAX&lt;/button&gt;
&lt;/div&gt;
&lt;div id=&quot;data&quot;&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/jsonp-demo/blob/master/server1.js" target="_blank">server1.js</a></div>
            <div class="path">server1.js</div>
          </div>
          <div class="body">
            <pre class="content"><code class="js">var express = require('express');

var app = express();
app.use(express.static('./'));

var server = app.listen(3000, function () {
  var host = server.address().address;
  var port = server.address().port;

  console.log('Example app listening at http://%s:%s', host, port);
});</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/jsonp-demo/blob/master/server2.js" target="_blank">server2.js</a></div>
            <div class="path">server2.js</div>
          </div>
          <div class="body">
            <pre class="content"><code class="js">var express = require('express');

var app = express();

app.get('/json-data', function (req, res) {
  res.json({name: 'Freewind'});
});

app.get('/jsonp-data', function (req, res) {
  res.jsonp({name: 'Freewind'});
});

var server = app.listen(3001, function () {
  var host = server.address().address;
  var port = server.address().port;

  console.log('Example app listening at http://%s:%s', host, port);
});</code></pre>
          </div>
        </div>
        <div class="github markdown-body"><span class="github-icon"><img src="/images/github.jpg"></span><span class="repo-url"><a href="https://github.com/js-demos/jsonp-demo">打开Github项目地址</a></span><span class="repo-issues"><a href="https://github.com/js-demos/jsonp-demo/issues?q=">有问题上Github Issues上讨论</a></span></div>
      </div>
    </div>
    <script src="/js/site.js"></script>
    <script type="javascript" src="https://s13.cnzz.com/z_stat.php?id=1274292847&amp;web_id=1274292847"></script>
  </body>
</html>
