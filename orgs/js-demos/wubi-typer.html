<html>
  <head>
    <title>数组网 - 彪悍的Demo无需解释</title>
    <link href="/css/site.css" rel="stylesheet">
    <script src="/js/less-3.8.0.min.js"></script>
    <link href="/css/github-markdown-2.10.0.css" rel="stylesheet">
    <script src="/js/markdown-0.5.0.js"></script>
  </head>
  <body>
    <div id="header">
      <div class="site-slogan">彪悍的Demo无须解释</div>
      <div><span class="site-name"><a href="/">数组网</a></span><span class="site-url"><a href="shuzu.org">shuzu.org</a></span></div>
    </div>
    <div id="main">
      <div id="repo-main">
        <div class="navigation"><span><a href="/">数组网</a></span><span> &gt; </span><span class="org-link"><a href="/orgs/js-demos/index.html">js-demos</a></span><span> &gt; </span><span class="repo-name">wubi-typer</span><span class="repo-description">Demo: https://js-demos.github.io/wubi-typer/</span></div>
        <div id="readme">
          <div class="markdown markdown-body">Wubi Typer
==========

用于练习五笔字根。

打开后，将会显示500个五笔字根，在键盘上输入相应的键即可。结束后，将会显示速度与正确率。

注：
- 打开页面后就开始计时
- 每个字根只有一次输入机会，不能回退或重输
- 把鼠标放在相应的字根上，会显示对应的键位
- 需要自行翻页
- 时间、速度与正确率等，在最下方显示

Run:

```
npm install
npm start
```

Then visit &lt;http://localhost:8080&gt;.

For dev:

```
npm install
npm install -g http-server

webpack -w
http-server .
```
</div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/wubi-typer/blob/master/index.html" target="_blank">index.html</a></div>
            <div class="path">index.html</div>
          </div>
          <div class="body">
            <pre class="content"><code class="html">&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
	&lt;meta charset=&quot;UTF-8&quot;&gt;
	&lt;title&gt;Wubi Typer&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div id='content'&gt;&lt;/div&gt;
	&lt;script src=&quot;assets/bundle.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/wubi-typer/blob/master/src/actions/index.js" target="_blank">index.js</a></div>
            <div class="path">src/actions/index.js</div>
          </div>
          <div class="body">
            <pre class="content"><code class="js">'use strict';
import types from './types';

export function typing(char) {
  return {type: types.TYPING, char: char};
}

export function reloadChars(count) {
  return {type: types.RELOAD_CHARS, count: count};
}</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/wubi-typer/blob/master/src/actions/types.js" target="_blank">types.js</a></div>
            <div class="path">src/actions/types.js</div>
          </div>
          <div class="body">
            <pre class="content"><code class="js">const TYPING = 'TYPING';
const RELOAD_CHARS = 'RELOAD_CHARS';

export default {
  TYPING,
  RELOAD_CHARS
}</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/wubi-typer/blob/master/src/chars-mapping.js" target="_blank">chars-mapping.js</a></div>
            <div class="path">src/chars-mapping.js</div>
          </div>
          <div class="body">
            <pre class="content"><code class="js">const mapping = {
  &quot;a&quot;: [
    &quot;public/images/chars/a-1.gif&quot;,
    &quot;public/images/chars/a-2.gif&quot;,
    &quot;public/images/chars/a-3.gif&quot;,
    &quot;public/images/chars/a-4.gif&quot;,
    &quot;public/images/chars/a-5.gif&quot;,
    &quot;public/images/chars/a-6.gif&quot;,
    &quot;public/images/chars/a-7.gif&quot;,
    &quot;public/images/chars/a-8.gif&quot;,
    &quot;public/images/chars/a-9.gif&quot;,
    &quot;public/images/chars/a-10.gif&quot;,
    &quot;public/images/chars/a-12.gif&quot;,
    &quot;public/images/chars/a-11.gif&quot;
  ],
  &quot;b&quot;: [
    &quot;public/images/chars/b-1.gif&quot;,
    &quot;public/images/chars/b-2.gif&quot;,
    &quot;public/images/chars/b-3.gif&quot;,
    &quot;public/images/chars/b-4.gif&quot;,
    &quot;public/images/chars/b-5.gif&quot;,
    &quot;public/images/chars/b-6.gif&quot;,
    &quot;public/images/chars/b-7.gif&quot;,
    &quot;public/images/chars/b-8.gif&quot;,
    &quot;public/images/chars/b-9.gif&quot;,
    &quot;public/images/chars/b-10.gif&quot;,
    &quot;public/images/chars/b-11.gif&quot;,
    &quot;public/images/chars/b-12.gif&quot;
  ],
  &quot;c&quot;: [
    &quot;public/images/chars/c-1.gif&quot;,
    &quot;public/images/chars/c-2.gif&quot;,
    &quot;public/images/chars/c-3.gif&quot;,
    &quot;public/images/chars/c-4.gif&quot;,
    &quot;public/images/chars/c-5.gif&quot;,
    &quot;public/images/chars/c-6.gif&quot;
  ],
  &quot;d&quot;: [
    &quot;public/images/chars/d-1.gif&quot;,
    &quot;public/images/chars/d-2.gif&quot;,
    &quot;public/images/chars/d-3.gif&quot;,
    &quot;public/images/chars/d-4.gif&quot;,
    &quot;public/images/chars/d-5.gif&quot;,
    &quot;public/images/chars/d-6.gif&quot;,
    &quot;public/images/chars/d-7.gif&quot;,
    &quot;public/images/chars/d-8.gif&quot;,
    &quot;public/images/chars/d-9.gif&quot;,
    &quot;public/images/chars/d-10.gif&quot;,
    &quot;public/images/chars/d-11.gif&quot;,
    &quot;public/images/chars/d-12.gif&quot;
  ],
  &quot;e&quot;: [
    &quot;public/images/chars/e-1.gif&quot;,
    &quot;public/images/chars/e-2.gif&quot;,
    &quot;public/images/chars/e-3.gif&quot;,
    &quot;public/images/chars/e-4.gif&quot;,
    &quot;public/images/chars/e-5.gif&quot;,
    &quot;public/images/chars/e-6.gif&quot;,
    &quot;public/images/chars/e-7.gif&quot;,
    &quot;public/images/chars/e-8.gif&quot;,
    &quot;public/images/chars/e-9.gif&quot;,
    &quot;public/images/chars/e-10.gif&quot;,
    &quot;public/images/chars/e-11.gif&quot;,
    &quot;public/images/chars/e-12.gif&quot;,
    &quot;public/images/chars/e-13.gif&quot;,
    &quot;public/images/chars/e-14.gif&quot;
  ],
  &quot;f&quot;: [
    &quot;public/images/chars/f-1.gif&quot;,
    &quot;public/images/chars/f-2.gif&quot;,
    &quot;public/images/chars/f-3.gif&quot;,
    &quot;public/images/chars/f-4.gif&quot;,
    &quot;public/images/chars/f-5.gif&quot;,
    &quot;public/images/chars/f-6.gif&quot;,
    &quot;public/images/chars/f-7.gif&quot;,
    &quot;public/images/chars/f-8.gif&quot;
  ],
  &quot;g&quot;: [
    &quot;public/images/chars/g-1.gif&quot;,
    &quot;public/images/chars/g-2.gif&quot;,
    &quot;public/images/chars/g-3.gif&quot;,
    &quot;public/images/chars/g-4.gif&quot;,
    &quot;public/images/chars/g-5.gif&quot;
  ],
  &quot;h&quot;: [
    &quot;public/images/chars/h-1.gif&quot;,
    &quot;public/images/chars/h-2.gif&quot;,
    &quot;public/images/chars/h-3.gif&quot;,
    &quot;public/images/chars/h-4.gif&quot;,
    &quot;public/images/chars/h-5.gif&quot;,
    &quot;public/images/chars/h-6.gif&quot;,
    &quot;public/images/chars/h-7.gif&quot;,
    &quot;public/images/chars/h-8.gif&quot;,
    &quot;public/images/chars/h-9.gif&quot;,
    &quot;public/images/chars/h-10.gif&quot;
  ],
  &quot;i&quot;: [
    &quot;public/images/chars/i-1.gif&quot;,
    &quot;public/images/chars/i-2.gif&quot;,
    &quot;public/images/chars/i-3.gif&quot;,
    &quot;public/images/chars/i-4.gif&quot;,
    &quot;public/images/chars/i-5.gif&quot;,
    &quot;public/images/chars/i-6.gif&quot;,
    &quot;public/images/chars/i-7.gif&quot;,
    &quot;public/images/chars/i-8.gif&quot;,
    &quot;public/images/chars/i-9.gif&quot;
  ],
  &quot;j&quot;: [
    &quot;public/images/chars/j-1.gif&quot;,
    &quot;public/images/chars/j-2.gif&quot;,
    &quot;public/images/chars/j-3.gif&quot;,
    &quot;public/images/chars/j-4.gif&quot;,
    &quot;public/images/chars/j-5.gif&quot;,
    &quot;public/images/chars/j-6.gif&quot;,
    &quot;public/images/chars/j-7.gif&quot;,
    &quot;public/images/chars/j-8.gif&quot;,
    &quot;public/images/chars/j-9.gif&quot;
  ],
  &quot;k&quot;: [
    &quot;public/images/chars/k-1.gif&quot;,
    &quot;public/images/chars/k-2.gif&quot;,
    &quot;public/images/chars/k-3.gif&quot;
  ],
  &quot;l&quot;: [
    &quot;public/images/chars/l-1.gif&quot;,
    &quot;public/images/chars/l-2.gif&quot;,
    &quot;public/images/chars/l-3.gif&quot;,
    &quot;public/images/chars/l-4.gif&quot;,
    &quot;public/images/chars/l-5.gif&quot;,
    &quot;public/images/chars/l-6.gif&quot;,
    &quot;public/images/chars/l-7.gif&quot;,
    &quot;public/images/chars/l-8.gif&quot;,
    &quot;public/images/chars/l-9.gif&quot;,
    &quot;public/images/chars/l-10.gif&quot;
  ],
  &quot;m&quot;: [
    &quot;public/images/chars/m-1.gif&quot;,
    &quot;public/images/chars/m-2.gif&quot;,
    &quot;public/images/chars/m-3.gif&quot;,
    &quot;public/images/chars/m-4.gif&quot;,
    &quot;public/images/chars/m-5.gif&quot;,
    &quot;public/images/chars/m-6.gif&quot;,
    &quot;public/images/chars/m-7.gif&quot;,
    &quot;public/images/chars/m-8.gif&quot;,
    &quot;public/images/chars/m-9.gif&quot;
  ],
  &quot;n&quot;: [
    &quot;public/images/chars/n-1.gif&quot;,
    &quot;public/images/chars/n-2.gif&quot;,
    &quot;public/images/chars/n-3.gif&quot;,
    &quot;public/images/chars/n-4.gif&quot;,
    &quot;public/images/chars/n-5.gif&quot;,
    &quot;public/images/chars/n-6.gif&quot;,
    &quot;public/images/chars/n-7.gif&quot;,
    &quot;public/images/chars/n-8.gif&quot;,
    &quot;public/images/chars/n-9.gif&quot;,
    &quot;public/images/chars/n-10.gif&quot;,
    &quot;public/images/chars/n-11.gif&quot;,
    &quot;public/images/chars/n-12.gif&quot;,
    &quot;public/images/chars/n-13.gif&quot;
  ],
  &quot;o&quot;: [
    &quot;public/images/chars/o-1.gif&quot;,
    &quot;public/images/chars/o-2.gif&quot;,
    &quot;public/images/chars/o-3.gif&quot;,
    &quot;public/images/chars/o-4.gif&quot;,
    &quot;public/images/chars/o-5.gif&quot;,
    &quot;public/images/chars/o-6.gif&quot;,
    &quot;public/images/chars/o-7.gif&quot;
  ],
  &quot;p&quot;: [
    &quot;public/images/chars/p-1.gif&quot;,
    &quot;public/images/chars/p-2.gif&quot;,
    &quot;public/images/chars/p-3.gif&quot;,
    &quot;public/images/chars/p-4.gif&quot;,
    &quot;public/images/chars/p-5.gif&quot;,
    &quot;public/images/chars/p-6.gif&quot;
  ],
  &quot;q&quot;: [
    &quot;public/images/chars/q-1.gif&quot;,
    &quot;public/images/chars/q-2.gif&quot;,
    &quot;public/images/chars/q-3.gif&quot;,
    &quot;public/images/chars/q-4.gif&quot;,
    &quot;public/images/chars/q-5.gif&quot;,
    &quot;public/images/chars/q-6.gif&quot;,
    &quot;public/images/chars/q-7.gif&quot;,
    &quot;public/images/chars/q-8.gif&quot;,
    &quot;public/images/chars/q-9.gif&quot;,
    &quot;public/images/chars/q-10.gif&quot;,
    &quot;public/images/chars/q-11.gif&quot;,
    &quot;public/images/chars/q-12.gif&quot;,
    &quot;public/images/chars/q-13.gif&quot;
  ],
  &quot;r&quot;: [
    &quot;public/images/chars/r-1.gif&quot;,
    &quot;public/images/chars/r-2.gif&quot;,
    &quot;public/images/chars/r-3.gif&quot;,
    &quot;public/images/chars/r-4.gif&quot;,
    &quot;public/images/chars/r-5.gif&quot;,
    &quot;public/images/chars/r-6.gif&quot;,
    &quot;public/images/chars/r-7.gif&quot;,
    &quot;public/images/chars/r-8.gif&quot;,
    &quot;public/images/chars/r-9.gif&quot;
  ],
  &quot;s&quot;: [
    &quot;public/images/chars/s-1.gif&quot;,
    &quot;public/images/chars/s-2.gif&quot;,
    &quot;public/images/chars/s-3.gif&quot;
  ],
  &quot;t&quot;: [
    &quot;public/images/chars/t-1.gif&quot;,
    &quot;public/images/chars/t-2.gif&quot;,
    &quot;public/images/chars/t-3.gif&quot;,
    &quot;public/images/chars/t-4.gif&quot;,
    &quot;public/images/chars/t-5.gif&quot;,
    &quot;public/images/chars/t-6.gif&quot;,
    &quot;public/images/chars/t-7.gif&quot;,
    &quot;public/images/chars/t-8.gif&quot;,
    &quot;public/images/chars/t-9.gif&quot;
  ],
  &quot;u&quot;: [
    &quot;public/images/chars/u-1.gif&quot;,
    &quot;public/images/chars/u-2.gif&quot;,
    &quot;public/images/chars/u-3.gif&quot;,
    &quot;public/images/chars/u-4.gif&quot;,
    &quot;public/images/chars/u-5.gif&quot;,
    &quot;public/images/chars/u-6.gif&quot;,
    &quot;public/images/chars/u-7.gif&quot;,
    &quot;public/images/chars/u-8.gif&quot;,
    &quot;public/images/chars/u-9.gif&quot;,
    &quot;public/images/chars/u-10.gif&quot;,
    &quot;public/images/chars/u-11.gif&quot;
  ],
  &quot;v&quot;: [
    &quot;public/images/chars/v-1.gif&quot;,
    &quot;public/images/chars/v-2.gif&quot;,
    &quot;public/images/chars/v-3.gif&quot;,
    &quot;public/images/chars/v-4.gif&quot;,
    &quot;public/images/chars/v-5.gif&quot;,
    &quot;public/images/chars/v-6.gif&quot;,
    &quot;public/images/chars/v-7.gif&quot;,
    &quot;public/images/chars/v-8.gif&quot;
  ],
  &quot;w&quot;: [
    &quot;public/images/chars/w-1.gif&quot;,
    &quot;public/images/chars/w-2.gif&quot;,
    &quot;public/images/chars/w-3.gif&quot;,
    &quot;public/images/chars/w-4.gif&quot;,
    &quot;public/images/chars/w-5.gif&quot;,
    &quot;public/images/chars/w-6.gif&quot;
  ],
  &quot;x&quot;: [
    &quot;public/images/chars/x-1.gif&quot;,
    &quot;public/images/chars/x-2.gif&quot;,
    &quot;public/images/chars/x-3.gif&quot;,
    &quot;public/images/chars/x-4.gif&quot;,
    &quot;public/images/chars/x-5.gif&quot;,
    &quot;public/images/chars/x-6.gif&quot;,
    &quot;public/images/chars/x-7.gif&quot;,
    &quot;public/images/chars/x-8.gif&quot;,
    &quot;public/images/chars/x-9.gif&quot;
  ],
  &quot;y&quot;: [
    &quot;public/images/chars/y-1.gif&quot;,
    &quot;public/images/chars/y-2.gif&quot;,
    &quot;public/images/chars/y-3.gif&quot;,
    &quot;public/images/chars/y-4.gif&quot;,
    &quot;public/images/chars/y-5.gif&quot;,
    &quot;public/images/chars/y-6.gif&quot;,
    &quot;public/images/chars/y-7.gif&quot;,
    &quot;public/images/chars/y-8.gif&quot;,
    &quot;public/images/chars/y-9.gif&quot;,
    &quot;public/images/chars/y-10.gif&quot;
  ]
};

export default mapping;
</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/wubi-typer/blob/master/src/generate-char.js" target="_blank">generate-char.js</a></div>
            <div class="path">src/generate-char.js</div>
          </div>
          <div class="body">
            <pre class="content"><code class="js">import _ from 'lodash';
import charsMapping from './chars-mapping';

const charPairs = _(charsMapping).map((images, char) =&gt; images.map(image =&gt; {
  return {char, image}
})).flatten().value();

export default function () {
  const randomIndex = Math.floor(Math.random() * charPairs.length);
  return charPairs[randomIndex];
};</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/wubi-typer/blob/master/src/reducers/index.js" target="_blank">index.js</a></div>
            <div class="path">src/reducers/index.js</div>
          </div>
          <div class="body">
            <pre class="content"><code class="js">'use strict';
import actionTypes from '../actions/types';
import generateChar from '../generate-char';
import moment from 'moment';

const initStore = {
  currentCharIndex: 0,
  startTime: moment(),
  finished: false,
  finishTime: undefined,
  chars: [] // [{char: String, image:String, typingState: 'waiting/correct/wrong'}]
};

function _handleTyping(state, action) {
  if (state.finished) {
    return state;
  }

  const isLastChar = state.currentCharIndex + 1 === state.chars.length;

  return Object.assign({}, state, {
    currentCharIndex: state.currentCharIndex + 1,
    chars: state.chars.map((item, index) =&gt; {
      if (index === state.currentCharIndex) {
        return Object.assign({}, item, {
          typingState: item.char.toLowerCase() === action.char.toLowerCase() ? 'correct' : 'wrong'
        });
      } else {
        return item;
      }
    }),
    finished: isLastChar,
    finishTime: isLastChar ? moment() : undefined
  });
}

function _handleReloadChars(state, action) {
  return Object.assign({}, state, {
    currentCharIndex: 0,
    chars: _.fill(Array(action.count), {}).map(x =&gt; {
      const {char, image}= generateChar();
      return {
        char,
        image,
        typingState: 'waiting'
      }
    })
  });
}

export default function (state = initStore, action) {
  switch (action.type) {
    case actionTypes.TYPING:
      return _handleTyping(state, action);
    case actionTypes.RELOAD_CHARS:
      return _handleReloadChars(state, action);
    default:
      return state;
  }
};
</code></pre>
          </div>
        </div>
        <div class="code-file panel markdown-body">
          <div class="header">
            <div class="name"><a href="https://github.com/js-demos/wubi-typer/blob/master/webpack.config.js" target="_blank">webpack.config.js</a></div>
            <div class="path">webpack.config.js</div>
          </div>
          <div class="body">
            <pre class="content"><code class="js">module.exports = {
  entry: './src/entry.jsx',
  output: {
    path: __dirname + '/assets',
    publicPath: '/assets/',
    filename: 'bundle.js'
  },
  module: {
    loaders: [{
      test: /\.(js|jsx)$/,
      exclude: /node_modules/,
      loader: 'babel',
      query: {
        presets: ['es2015', 'react']
      }
    }, {
      test: /\.less$/,
      exclude: /node_modules/,
      loader: &quot;style!css!less&quot;
    }]
  }
};</code></pre>
          </div>
        </div>
        <div class="github markdown-body"><span class="github-icon"><img src="/images/github.jpg"></span><span class="repo-url"><a href="https://github.com/js-demos/wubi-typer">打开Github项目地址</a></span><span class="repo-issues"><a href="https://github.com/js-demos/wubi-typer/issues?q=">有问题上Github Issues上讨论</a></span></div>
      </div>
    </div>
    <script src="/js/site.js"></script>
  </body>
</html>
